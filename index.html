<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="author" content="wulizhou">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>个人资源站点</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary-color: #4263eb;
            --secondary-color: #2b3a8c;
            --light-color: #f8f9fa;
            --dark-color: #2d3436;
            --accent-color: #fa5252;
            --success-color: #40c057;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f1f3f5;
            color: var(--dark-color);
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--light-color);
        }
        
        h1 {
            color: var(--secondary-color);
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .intro {
            color: var(--dark-color);
            font-size: 1.1rem;
            max-width: 700px;
            margin: 0 auto;
        }
        
        /* 标签页样式 */
        .tabs {
            display: flex;
            border-bottom: 1px solid #dee2e6;
            margin-bottom: 30px;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 1rem;
            font-weight: 500;
            color: #495057;
            position: relative;
            transition: color 0.3s;
        }
        
        .tab.active {
            color: var(--primary-color);
        }
        
        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--primary-color);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* 资源组样式 */
        .resource-groups {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .resource-group {
            background: white;
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .resource-group:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .group-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light-color);
        }
        
        .group-title {
            color: var(--primary-color);
            font-size: 1.4rem;
            display: flex;
            align-items: center;
        }
        
        .group-title i {
            margin-right: 10px;
            font-size: 1.2em;
        }
        
        .group-count {
            background-color: var(--light-color);
            color: var(--dark-color);
            border-radius: 20px;
            padding: 2px 10px;
            font-size: 0.8rem;
        }
        
        .resource-list {
            list-style: none;
        }
        
        .resource-item {
            margin-bottom: 12px;
            padding: 8px 10px;
            border-radius: 5px;
            transition: background-color 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .resource-item:hover {
            background-color: #f8f9fa;
        }
        
        .resource-link {
            color: var(--dark-color);
            text-decoration: none;
            font-size: 1.05rem;
            transition: color 0.2s ease;
            display: flex;
            align-items: center;
            flex: 1;
        }
        
        .resource-link:hover {
            color: var(--primary-color);
        }
        
        .resource-link i.external-icon {
            margin-left: 5px;
            font-size: 0.8em;
            color: #6c757d;
        }
        
        .resource-description {
            font-size: 0.9rem;
            color: #6c757d;
            margin-top: 3px;
            margin-left: 20px;
        }
        
        .resource-actions {
            display: flex;
            gap: 5px;
        }
        
        .action-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 0.9rem;
            transition: color 0.2s;
            padding: 3px;
        }
        
        .edit-btn {
            color: #1971c2;
        }
        
        .delete-btn {
            color: var(--accent-color);
        }
        
        /* 表单样式 */
        .form-section {
            background-color: #f8f9fa;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        
        .form-section h3 {
            color: var(--secondary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #dee2e6;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: var(--dark-color);
            font-weight: 500;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: border-color 0.2s ease;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(66, 99, 235, 0.1);
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn:hover {
            background-color: var(--secondary-color);
        }
        
        .btn-secondary {
            background-color: #6c757d;
        }
        
        .btn-secondary:hover {
            background-color: #5a6268;
        }
        
        .btn-success {
            background-color: var(--success-color);
        }
        
        .btn-success:hover {
            background-color: #34a853;
        }
        
        .btn-danger {
            background-color: var(--accent-color);
        }
        
        .btn-danger:hover {
            background-color: #e03131;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        /* 分组列表样式 */
        .group-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .group-card {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .group-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .group-icon {
            color: var(--primary-color);
            font-size: 1.5rem;
        }
        
        /* 通知样式 */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 15px 20px;
            background-color: white;
            border-left: 4px solid var(--success-color);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            border-radius: 4px;
            transform: translateY(100px);
            opacity: 0;
            transition: transform 0.3s, opacity 0.3s;
            z-index: 1000;
        }
        
        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        .notification.error {
            border-left-color: var(--accent-color);
        }
        
        footer {
            text-align: center;
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid var(--light-color);
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .resource-groups, .group-list {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .container {
                padding: 20px;
            }
            
            .tabs {
                flex-wrap: wrap;
            }
            
            .tab {
                padding: 8px 12px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>个人资源站点</h1>
            <p class="intro">收集和整理各类开发资源与工具，方便日常学习和工作使用</p>
        </header>
        
        <!-- 标签页导航 -->
        <div class="tabs">
            <button class="tab active" data-tab="resources">资源列表</button>
            <button class="tab" data-tab="add-resource">添加资源</button>
            <button class="tab" data-tab="manage-groups">管理分组</button>
            <button class="tab" data-tab="import-export">导出/导入</button>
        </div>
        
        <!-- 资源列表标签页 -->
        <div class="tab-content active" id="resources">
            <div class="resource-groups" id="resourceContainer">
                <!-- 资源组将通过JavaScript动态生成 -->
                <div class="loading">正在加载资源，请稍候...</div>
            </div>
        </div>
        
        <!-- 添加资源标签页 -->
        <div class="tab-content" id="add-resource">
            <div class="form-section">
                <h3>添加新资源</h3>
                <div class="form-group">
                    <label for="newResourceGroup">资源分组</label>
                    <select id="newResourceGroup">
                        <!-- 分组选项将通过JavaScript动态生成 -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="newResourceName">资源名称</label>
                    <input type="text" id="newResourceName" placeholder="输入资源名称">
                </div>
                <div class="form-group">
                    <label for="newResourceUrl">资源链接</label>
                    <input type="url" id="newResourceUrl" placeholder="输入资源URL">
                </div>
                <div class="form-group">
                    <label for="newResourceDescription">资源描述（可选）</label>
                    <textarea id="newResourceDescription" placeholder="输入资源描述（可选）"></textarea>
                </div>
                <button class="btn" onclick="addNewResource()">
                    <i class="fas fa-plus"></i> 添加资源
                </button>
            </div>
        </div>
        
        <!-- 管理分组标签页 -->
        <div class="tab-content" id="manage-groups">
            <div class="form-section">
                <h3>创建新分组</h3>
                <div class="form-group">
                    <label for="newGroupName">分组名称</label>
                    <input type="text" id="newGroupName" placeholder="输入分组名称">
                </div>
                <div class="form-group">
                    <label for="newGroupIcon">选择图标</label>
                    <select id="newGroupIcon">
                        <option value="folder">文件夹 (folder)</option>
                        <option value="android">Android (android)</option>
                        <option value="apple-alt">iOS (apple-alt)</option>
                        <option value="code">代码 (code)</option>
                        <option value="wrench">工具 (wrench)</option>
                        <option value="book">书籍 (book)</option>
                        <option value="link">链接 (link)</option>
                        <option value="database">数据库 (database)</option>
                        <option value="cloud">云服务 (cloud)</option>
                        <option value="terminal">终端 (terminal)</option>
                    </select>
                </div>
                <button class="btn" onclick="createNewGroup()">
                    <i class="fas fa-folder-plus"></i> 创建分组
                </button>
            </div>
            
            <h3>现有分组</h3>
            <div class="group-list" id="groupList">
                <!-- 分组列表将通过JavaScript动态生成 -->
            </div>
        </div>
        
        <!-- 导出/导入标签页 -->
        <div class="tab-content" id="import-export">
            <div class="form-section">
                <h3>导出配置</h3>
                <p>将当前资源配置导出为JSON文件，用于备份或迁移到其他设备。</p>
                <button class="btn btn-success" onclick="exportConfig()">
                    <i class="fas fa-download"></i> 导出配置文件
                </button>
            </div>
            
            <div class="form-section">
                <h3>导入配置</h3>
                <p>从JSON文件导入资源配置，这将覆盖当前所有资源和分组。</p>
                <input type="file" id="importFile" accept=".json" style="margin-bottom: 15px;">
                <button class="btn btn-secondary" onclick="importConfig()">
                    <i class="fas fa-upload"></i> 导入配置文件
                </button>
            </div>
            
            <div class="form-section">
                <h3>清空数据</h3>
                <p>此操作将删除所有资源和分组，恢复到初始状态。</p>
                <button class="btn btn-danger" onclick="clearAllData()">
                    <i class="fas fa-trash"></i> 清空所有数据
                </button>
            </div>
        </div>
        
        <footer>
            <p>个人资源站点 &copy; 2023</p>
        </footer>
    </div>
    
    <!-- 通知组件 -->
    <div class="notification" id="notification"></div>

    <script>
        // 数据存储
        let appData = {
            groups: [],
            resources: []
        };
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', initApp);
        
        // 初始化应用
        function initApp() {
            // 尝试多种方式加载JSON配置
            loadDataWithFallback();
            
            // 设置标签页切换
            setupTabs();
        }
        
        // 多种方式加载数据，带有降级方案
        function loadDataWithFallback() {
            // 首先尝试从localStorage加载（如果用户之前导入过）
            const savedData = localStorage.getItem('resourceSiteData');
            if (savedData) {
                try {
                    appData = JSON.parse(savedData);
                    renderAll();
                    showNotification('从本地存储加载数据成功');
                    return;
                } catch (e) {
                    console.error('本地存储数据解析失败', e);
                }
            }
            
            // 然后尝试从JSON文件加载
            loadFromJsonFile();
        }
        
        // 从JSON文件加载数据
        function loadFromJsonFile() {
            fetch('resources.json')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('无法加载配置文件');
                    }
                    return response.json();
                })
                .then(data => {
                    appData = data;
                    // 同时保存到localStorage作为备份
                    localStorage.setItem('resourceSiteData', JSON.stringify(appData));
                    renderAll();
                    showNotification('从配置文件加载数据成功');
                })
                .catch(error => {
                    console.error('加载配置文件失败:', error);
                    showNotification('无法加载JSON文件，可能是浏览器安全限制。请使用导入功能或本地服务器', 'error');
                    
                    // 使用默认数据
                    useDefaultData();
                    renderAll();
                });
        }
        
        // 使用默认数据
        function useDefaultData() {
            appData = {
                "groups": [
                    {
                        "id": "android",
                        "name": "Android资源",
                        "icon": "android"
                    },
                    {
                        "id": "ios",
                        "name": "iOS资源",
                        "icon": "apple-alt"
                    },
                    {
                        "id": "tools",
                        "name": "工具",
                        "icon": "wrench"
                    },
                    {
                        "id": "other",
                        "name": "其他资源",
                        "icon": "folder-open"
                    }
                ],
                "resources": [
                    {
                        "id": "default-1",
                        "group": "android",
                        "name": "示例Android资源",
                        "url": "#",
                        "description": "这是一个示例资源"
                    }
                ]
            };
            // 保存默认数据到localStorage
            localStorage.setItem('resourceSiteData', JSON.stringify(appData));
        }
        
        // 渲染所有内容
        function renderAll() {
            renderResources();
            renderGroupSelect();
            renderGroupList();
        }
        
        // 渲染资源列表
        function renderResources() {
            const container = document.getElementById('resourceContainer');
            container.innerHTML = '';
            
            if (appData.groups.length === 0) {
                container.innerHTML = '<div class="empty-state">暂无分组，请先创建分组</div>';
                return;
            }
            
            // 按分组整理资源
            const groupedResources = {};
            appData.resources.forEach(resource => {
                if (!groupedResources[resource.group]) {
                    groupedResources[resource.group] = [];
                }
                groupedResources[resource.group].push(resource);
            });
            
            // 生成每个资源组的HTML
            appData.groups.forEach(group => {
                const groupResources = groupedResources[group.id] || [];
                
                const groupDiv = document.createElement('div');
                groupDiv.className = 'resource-group';
                
                const groupHeader = document.createElement('div');
                groupHeader.className = 'group-header';
                
                const groupTitle = document.createElement('h3');
                groupTitle.className = 'group-title';
                groupTitle.innerHTML = `<i class="fas fa-${group.icon}"></i> ${group.name}`;
                
                const groupCount = document.createElement('span');
                groupCount.className = 'group-count';
                groupCount.textContent = `${groupResources.length} 个资源`;
                
                groupHeader.appendChild(groupTitle);
                groupHeader.appendChild(groupCount);
                groupDiv.appendChild(groupHeader);
                
                const resourceList = document.createElement('ul');
                resourceList.className = 'resource-list';
                
                if (groupResources.length === 0) {
                    const emptyItem = document.createElement('li');
                    emptyItem.className = 'resource-item';
                    emptyItem.innerHTML = '<span style="color: #6c757d;">该分组暂无资源</span>';
                    resourceList.appendChild(emptyItem);
                } else {
                    groupResources.forEach(resource => {
                        const listItem = document.createElement('li');
                        listItem.className = 'resource-item';
                        
                        const linkContainer = document.createElement('div');
                        linkContainer.style.flex = '1';
                        
                        const link = document.createElement('a');
                        link.className = 'resource-link';
                        link.href = resource.url;
                        link.textContent = resource.name;
                        
                        // 判断是否为外部链接
                        if (resource.url.startsWith('http://') || resource.url.startsWith('https://')) {
                            link.target = '_blank';
                            link.innerHTML += ' <i class="fas fa-external-link-alt external-icon"></i>';
                        }
                        
                        linkContainer.appendChild(link);
                        
                        // 添加描述
                        if (resource.description) {
                            const description = document.createElement('div');
                            description.className = 'resource-description';
                            description.textContent = resource.description;
                            linkContainer.appendChild(description);
                        }
                        
                        // 操作按钮
                        const actions = document.createElement('div');
                        actions.className = 'resource-actions';
                        actions.innerHTML = `
                            <button class="action-btn edit-btn" onclick="editResource('${resource.id}')" title="编辑">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn delete-btn" onclick="deleteResource('${resource.id}')" title="删除">
                                <i class="fas fa-trash"></i>
                            </button>
                        `;
                        
                        listItem.appendChild(linkContainer);
                        listItem.appendChild(actions);
                        resourceList.appendChild(listItem);
                    });
                }
                
                groupDiv.appendChild(resourceList);
                container.appendChild(groupDiv);
            });
        }
        
        // 渲染分组选择下拉框
        function renderGroupSelect() {
            const select = document.getElementById('newResourceGroup');
            select.innerHTML = '';
            
            appData.groups.forEach(group => {
                const option = document.createElement('option');
                option.value = group.id;
                option.textContent = group.name;
                select.appendChild(option);
            });
        }
        
        // 渲染分组列表
        function renderGroupList() {
            const container = document.getElementById('groupList');
            container.innerHTML = '';
            
            appData.groups.forEach(group => {
                // 计算该分组下的资源数量
                const resourceCount = appData.resources.filter(r => r.group === group.id).length;
                
                const groupCard = document.createElement('div');
                groupCard.className = 'group-card';
                groupCard.innerHTML = `
                    <div class="group-info">
                        <i class="fas fa-${group.icon} group-icon"></i>
                        <div>
                            <div>${group.name}</div>
                            <div style="font-size: 0.8rem; color: #6c757d;">${resourceCount} 个资源</div>
                        </div>
                    </div>
                    <div class="resource-actions">
                        <button class="action-btn edit-btn" onclick="editGroup('${group.id}')" title="编辑">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="action-btn delete-btn" onclick="deleteGroup('${group.id}')" title="删除">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                container.appendChild(groupCard);
            });
        }
        
        // 设置标签页切换
        function setupTabs() {
            const tabs = document.querySelectorAll('.tab');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // 移除所有活动状态
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    // 添加当前活动状态
                    tab.classList.add('active');
                    const tabId = tab.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            });
        }
        
        // 添加新资源
        function addNewResource() {
            const groupId = document.getElementById('newResourceGroup').value;
            const name = document.getElementById('newResourceName').value.trim();
            const url = document.getElementById('newResourceUrl').value.trim();
            const description = document.getElementById('newResourceDescription').value.trim();
            
            if (!name || !url) {
                showNotification('请填写资源名称和链接', 'error');
                return;
            }
            
            // 生成唯一ID
            const id = 'res-' + Date.now();
            
            // 添加新资源
            appData.resources.push({
                id,
                group: groupId,
                name,
                url,
                description
            });
            
            // 保存到localStorage
            localStorage.setItem('resourceSiteData', JSON.stringify(appData));
            
            // 重新渲染
            renderAll();
            
            // 清空表单
            document.getElementById('newResourceName').value = '';
            document.getElementById('newResourceUrl').value = '';
            document.getElementById('newResourceDescription').value = '';
            
            showNotification('资源添加成功');
        }
        
        // 创建新分组
        function createNewGroup() {
            const name = document.getElementById('newGroupName').value.trim();
            const icon = document.getElementById('newGroupIcon').value;
            
            if (!name) {
                showNotification('请输入分组名称', 'error');
                return;
            }
            
            // 生成唯一ID（将名称转换为小写并替换空格）
            let id = name.toLowerCase().replace(/\s+/g, '-');
            
            // 确保ID唯一
            const originalId = id;
            let counter = 1;
            while (appData.groups.some(g => g.id === id)) {
                id = originalId + '-' + counter++;
            }
            
            // 添加新分组
            appData.groups.push({
                id,
                name,
                icon
            });
            
            // 保存到localStorage
            localStorage.setItem('resourceSiteData', JSON.stringify(appData));
            
            // 重新渲染
            renderAll();
            
            // 清空表单
            document.getElementById('newGroupName').value = '';
            
            showNotification('分组创建成功');
        }
        
        // 编辑资源
        function editResource(resourceId) {
            const resource = appData.resources.find(r => r.id === resourceId);
            if (!resource) return;
            
            const newName = prompt('编辑资源名称:', resource.name);
            if (newName === null) return; // 用户取消
            
            const newUrl = prompt('编辑资源链接:', resource.url);
            if (newUrl === null) return;
            
            const newDescription = prompt('编辑资源描述:', resource.description || '');
            if (newDescription === null) return;
            
            if (!newName.trim() || !newUrl.trim()) {
                showNotification('名称和链接不能为空', 'error');
                return;
            }
            
            // 更新资源
            resource.name = newName.trim();
            resource.url = newUrl.trim();
            resource.description = newDescription.trim();
            
            // 保存到localStorage
            localStorage.setItem('resourceSiteData', JSON.stringify(appData));
            
            renderResources();
            showNotification('资源更新成功');
        }
        
        // 删除资源
        function deleteResource(resourceId) {
            if (!confirm('确定要删除这个资源吗？')) return;
            
            appData.resources = appData.resources.filter(r => r.id !== resourceId);
            
            // 保存到localStorage
            localStorage.setItem('resourceSiteData', JSON.stringify(appData));
            
            renderAll();
            showNotification('资源已删除');
        }
        
        // 编辑分组
        function editGroup(groupId) {
            const group = appData.groups.find(g => g.id === groupId);
            if (!group) return;
            
            const newName = prompt('编辑分组名称:', group.name);
            if (newName === null || !newName.trim()) return;
            
            group.name = newName.trim();
            
            // 保存到localStorage
            localStorage.setItem('resourceSiteData', JSON.stringify(appData));
            
            renderAll();
            showNotification('分组更新成功');
        }
        
        // 删除分组
        function deleteGroup(groupId) {
            // 检查该分组下是否有资源
            const groupResources = appData.resources.filter(r => r.group === groupId);
            if (groupResources.length > 0) {
                if (!confirm(`这个分组包含 ${groupResources.length} 个资源，删除分组会同时删除这些资源。确定要删除吗？`)) {
                    return;
                }
            } else if (!confirm('确定要删除这个分组吗？')) {
                return;
            }
            
            // 删除分组
            appData.groups = appData.groups.filter(g => g.id !== groupId);
            
            // 删除该分组下的所有资源
            appData.resources = appData.resources.filter(r => r.group !== groupId);
            
            // 保存到localStorage
            localStorage.setItem('resourceSiteData', JSON.stringify(appData));
            
            renderAll();
            showNotification('分组已删除');
        }
        
        // 导出配置
        function exportConfig() {
            const dataStr = JSON.stringify(appData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = 'resources.json';
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showNotification('配置文件导出成功');
        }
        
        // 导入配置
        function importConfig() {
            const fileInput = document.getElementById('importFile');
            if (!fileInput.files || fileInput.files.length === 0) {
                showNotification('请先选择要导入的JSON文件', 'error');
                return;
            }
            
            if (!confirm('导入配置会覆盖当前所有数据，确定要继续吗？')) {
                return;
            }
            
            const file = fileInput.files[0];
            const reader = new FileReader();
            
            reader.onload = function(e) {
                try {
                    const importedData = JSON.parse(e.target.result);
                    
                    // 简单验证数据格式
                    if (Array.isArray(importedData.groups) && Array.isArray(importedData.resources)) {
                        appData = importedData;
                        // 保存到localStorage
                        localStorage.setItem('resourceSiteData', JSON.stringify(appData));
                        renderAll();
                        showNotification('配置文件导入成功');
                        fileInput.value = ''; // 重置文件输入
                    } else {
                        throw new Error('无效的配置文件格式');
                    }
                } catch (error) {
                    console.error('导入失败:', error);
                    showNotification('导入失败，文件格式不正确', 'error');
                }
            };
            
            reader.readAsText(file);
        }
        
        // 清空所有数据
        function clearAllData() {
            if (!confirm('确定要清空所有数据吗？此操作不可恢复！')) {
                return;
            }
            
            useDefaultData();
            renderAll();
            showNotification('所有数据已清空，恢复为默认状态');
        }
        
        // 显示通知
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = 'notification';
            if (type === 'error') {
                notification.classList.add('error');
            }
            notification.classList.add('show');
            
            // 3秒后隐藏通知
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
    </script>
</body>
</html>
    